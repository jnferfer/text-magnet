"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),r=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,n=require("vis-data"),u=require("vis-network"),i=require("lodash");require("vis-network/styles/vis-network.css");var o=["graph","events","getNetwork","options"];function s(e){return t.useState(e)[0]}var a=function(e,t,r){void 0===r&&(r="id");var n=new Set(t.map((function(e){return e[r]}))),u=e.filter((function(e){return!n.has(e[r])})),o=i.intersectionWith(t,e,i.isEqual),s=i.differenceWith(i.intersectionWith(t,e,(function(e,t){return e[r]===t[r]})),o,i.isEqual);return{removed:u,unchanged:o,updated:s,added:i.differenceWith(i.differenceWith(t,e,i.isEqual),s,i.isEqual)}},f={physics:{stabilization:!1},autoResize:!1,edges:{smooth:!1,color:"#000000",width:.5,arrows:{to:{enabled:!0,scaleFactor:.5}}}};exports.default=t.forwardRef((function(e,d){var c=e.graph,v=e.events,l=e.getNetwork,h=e.options,p=function(e,t){if(null==e)return{};var r,n,u={},i=Object.keys(e);for(n=0;n<i.length;n++)t.indexOf(r=i[n])>=0||(u[r]=e[r]);return u}(e,o),g=t.useRef(null),w=s((function(){return new n.DataSet(c.edges)})),E=s((function(){return new n.DataSet(c.nodes)})),q=s(h),b=t.useRef(c.nodes),m=t.useRef(c.edges);t.useEffect((function(){if(!i.isEqual(c.nodes,b.current)){var e=a(b.current,c.nodes),t=e.added,r=e.updated;E.remove(e.removed),E.add(t),E.update(r),b.current=c.nodes}}),[c.nodes,E]),t.useEffect((function(){if(!i.isEqual(c.edges,m.current)){var e=a(m.current,c.edges),t=e.added,r=e.updated;w.remove(e.removed),w.add(t),w.update(r),m.current=c.edges}}),[c.edges,w]);var y=t.useState(),O=y[0],k=y[1];return t.useImperativeHandle(d,(function(){return O}),[O]),t.useEffect((function(){if(!O||!v)return function(){};for(var e=0,t=Object.entries(v);e<t.length;e++){var r=t[e],n=r[1];n&&O.on(r[0],n)}return function(){for(var e=0,t=Object.entries(v);e<t.length;e++){var r=t[e],n=r[1];n&&O.off(r[0],n)}}}),[v,O]),t.useEffect((function(){if(O&&h)try{O.setOptions(h)}catch(e){throw e}}),[O,h]),t.useEffect((function(){var e=i.defaultsDeep(i.cloneDeep(q),f),t=new u.Network(g.current,{edges:w,nodes:E},e);return k(t),l&&l(t),function(){t.destroy()}}),[w,q,E]),function(e,r){t.useEffect((function(){if(e.current){var t=new ResizeObserver(r);return t.observe(e.current),function(){t.disconnect()}}}),[r,e])}(g,(function(){O&&O.redraw()})),r.createElement("div",Object.assign({style:{width:"100%",height:"100%"},ref:g},p))}));
//# sourceMappingURL=react-vis-graph-wrapper.cjs.production.min.js.map
